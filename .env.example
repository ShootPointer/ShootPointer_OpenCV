# =========================
# 기본 자르기 길이(초) / 최대 클립 수
# =========================
DEFAULT_PRE=5.0
DEFAULT_POST=5.0
MAX_CLIPS=10

# =========================
# 자동 후보(오디오)
# =========================
SILENCE_THRESHOLD_DB=-28
SILENCE_MIN_DUR=0.30
AUTO_TOPK=5

# =========================
# 등번호 감지(OpenCV + Tesseract)
# =========================
JERSEY_SAMPLE_FPS=1.5
JERSEY_MIN_SEG_DUR=1.2
JERSEY_MERGE_GAP=2.0
JERSEY_TESSERACT_PSM=7
JERSEY_TESSERACT_OEM=3
JERSEY_NUM_CONF=0.5

# 단일 글자 우선 세팅 (필요시 조정)
OCR_PSMS=10,8,7
OCR_TRY_INVERT=0
OCR_SCALES=2.0

# 타임아웃/예산
OCR_TIMEOUT_SEC=5
OCR_MAX_COMBOS=120
OCR_MAX_SEC=8
DEBUG_OCR=0

# =========================
# 실행/안정화
# =========================
LOG_LEVEL=INFO
REQUEST_LOG_BODY=false
FFMPEG_TIMEOUT_SEC=120
MAX_UPLOAD_BYTES=209715200

# =========================
# GPU / 하드웨어 가속
# =========================
USE_CUDA=true
CUDA_RESIZE_MAX=1920

# FFmpeg 하드웨어 디코드 (NVIDIA라면 nvdec)
# ※ config.py는 FF_HWACCEL/FFMPEG_HWACCEL 모두 지원
FF_HWACCEL=nvdec
FF_HWACCEL_DEVICE=0

# (선택) 컷 실패시 재인코드 폴백 켜기
FFMPEG_CUT_FALLBACK_REENCODE=1
# (선택) 재인코드 파라미터 튜닝
FFMPEG_THREADS=0
FFMPEG_REENC_VCODEC=libx264
FFMPEG_REENC_PRESET=veryfast
FFMPEG_REENC_CRF=23
FFMPEG_REENC_ACODEC=aac

# =========================
# 프리사인드 업로드(게이트웨이 ↔ OpenCV 서버)
# =========================
PRE_SIGNED_SECRET=GWzLpvV0E+QgAGDxJstwbMsiw1Ibx2PqW+FSAREfT5F8M1vMiZzy8/ysNWXHeaSnLTy4ZmF7w5+GvWbU2ZQeLw==
PRESIGNED_EXPIRES_MIN=30
UPLOAD_DIR=/tmp/uploads
UPLOAD_CHUNK_MAX_MB=200

# CORS
ALLOW_ORIGINS=*

# =========================
# 콜백/백엔드 연동(옵션) & 다운로드 타임아웃
# =========================
BACKEND_SECRET=
CALLBACK_CONNECT_TIMEOUT=30
CALLBACK_READ_TIMEOUT=60
CALLBACK_WRITE_TIMEOUT=60

# =========================
# Redis / 진행률
# =========================
# 도커 컴포즈 환경: redis://redis:6379/0
# 로컬 단독 실행:   redis://localhost:6379/0
REDIS_URL=redis://redis:6379/0
PROGRESS_PUBLISH_INTERVAL_SEC=5

# (옵션) 채널명 (현재 코드는 progress:{memberId}:{jobId} / result:{memberId}:{jobId}를 사용)
REDIS_UPLOAD_CHANNEL=upload_progress
REDIS_PROCESS_CHANNEL=process_progress

# =========================
# 파일 저장/정적 URL
# =========================
SAVE_ROOT=/data/highlights
# 개발(FastAPI 직접 서빙):
# STATIC_BASE_URL=http://localhost:8000/static/highlights
# 운영(Nginx 서빙):
STATIC_BASE_URL=https://your-domain/static/highlights

# =========================
# 결과 KV 저장 설정 (백엔드 요구사항)
# =========================
PUBLISH_RESULT_AS_KV=true
RESULT_KEY_PREFIX=highlight-
RESULT_TTL_SECONDS=86400

# =========================
# 하이라이트 발행 정책
# =========================
PUBLISH_THRESHOLD=2
